<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" th:replace="layout/base :: layout(~{::content}, ~{::title})">
<head>
    <title>게시글 작성</title>
</head>
<body>
    <div th:fragment="content">
        <!-- Navigation -->
        <div class="mb-3">
            <a href="/boards" class="btn btn-outline-secondary">
                <i class="fas fa-list"></i> 목록으로
            </a>
        </div>

        <!-- Form Card -->
        <div class="card">
            <div class="card-header">
                <h3 class="mb-0">
                    <i class="fas fa-pencil-alt"></i> 새 게시글 작성
                </h3>
            </div>
            <div class="card-body">
                <form th:action="@{/boards/new}" method="post" th:object="${board}">
                    <!-- Title -->
                    <div class="mb-3">
                        <label for="title" class="form-label">
                            <i class="fas fa-heading"></i> 제목 <span class="text-danger">*</span>
                        </label>
                        <input type="text" 
                               class="form-control form-control-lg" 
                               id="title" 
                               th:field="*{title}"
                               placeholder="게시글 제목을 입력하세요"
                               required
                               maxlength="200">
                        <div class="form-text">최대 200자까지 입력 가능합니다.</div>
                    </div>

                    <!-- Author -->
                    <div class="mb-3">
                        <label for="author" class="form-label">
                            <i class="fas fa-user"></i> 작성자 <span class="text-danger">*</span>
                        </label>
                        <input type="text" 
                               class="form-control" 
                               id="author" 
                               th:field="*{author}"
                               placeholder="작성자명을 입력하세요"
                               required
                               maxlength="50">
                        <div class="form-text">최대 50자까지 입력 가능합니다.</div>
                    </div>

                    <!-- Content -->
                    <div class="mb-4">
                        <label for="content" class="form-label">
                            <i class="fas fa-align-left"></i> 내용 <span class="text-danger">*</span>
                        </label>
                        <textarea class="form-control" 
                                  id="content" 
                                  th:field="*{content}"
                                  rows="15"
                                  placeholder="게시글 내용을 입력하세요"
                                  required></textarea>
                        <div class="form-text">게시글의 상세 내용을 작성해주세요.</div>
                    </div>

                    <!-- Buttons -->
                    <div class="d-flex justify-content-between">
                        <div>
                            <a href="/boards" class="btn btn-secondary">
                                <i class="fas fa-times"></i> 취소
                            </a>
                        </div>
                        <div>
                            <button type="reset" class="btn btn-outline-warning me-2">
                                <i class="fas fa-undo"></i> 초기화
                            </button>
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-save"></i> 저장
                            </button>
                        </div>
                    </div>
                </form>
            </div>
        </div>

        <!-- Form Validation -->
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                const form = document.querySelector('form');
                
                form.addEventListener('submit', function(e) {
                    const title = document.getElementById('title').value.trim();
                    const author = document.getElementById('author').value.trim();
                    const content = document.getElementById('content').value.trim();
                    
                    if (!title || !author || !content) {
                        e.preventDefault();
                        alert('모든 필수 항목을 입력해주세요.');
                        return false;
                    }
                    
                    if (title.length > 200) {
                        e.preventDefault();
                        alert('제목은 200자를 초과할 수 없습니다.');
                        return false;
                    }
                    
                    if (author.length > 50) {
                        e.preventDefault();
                        alert('작성자명은 50자를 초과할 수 없습니다.');
                        return false;
                    }
                });
                
                // Character counter for title
                const titleInput = document.getElementById('title');
                const titleHelp = titleInput.nextElementSibling;
                
                titleInput.addEventListener('input', function() {
                    const remaining = 200 - this.value.length;
                    titleHelp.textContent = `${this.value.length}/200자 (${remaining}자 남음)`;
                    
                    if (remaining < 0) {
                        titleHelp.className = 'form-text text-danger';
                    } else if (remaining < 20) {
                        titleHelp.className = 'form-text text-warning';
                    } else {
                        titleHelp.className = 'form-text';
                    }
                });
                
                // Character counter for author
                const authorInput = document.getElementById('author');
                const authorHelp = authorInput.nextElementSibling;
                
                authorInput.addEventListener('input', function() {
                    const remaining = 50 - this.value.length;
                    authorHelp.textContent = `${this.value.length}/50자 (${remaining}자 남음)`;
                    
                    if (remaining < 0) {
                        authorHelp.className = 'form-text text-danger';
                    } else if (remaining < 5) {
                        authorHelp.className = 'form-text text-warning';
                    } else {
                        authorHelp.className = 'form-text';
                    }
                });
            });
        </script>

        <style>
            .form-control:focus {
                border-color: #0d6efd;
                box-shadow: 0 0 0 0.2rem rgba(13, 110, 253, 0.25);
            }
            
            .card {
                box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
            }
        </style>
    </div>
</body>
</html>
